@tailwind base;
@tailwind components;
@tailwind utilities;

/*
 * Font fallbacks with size-adjust to prevent CLS (Cumulative Layout Shift)
 * These fallback fonts have adjusted metrics to match the custom fonts
 */
@font-face {
  font-family: 'Barlow Fallback';
  src: local('Arial');
  size-adjust: 102%;
  ascent-override: 95%;
  descent-override: 22%;
  line-gap-override: 0%;
}

@font-face {
  font-family: 'Source Sans 3 Fallback';
  src: local('Arial');
  size-adjust: 101%;
  ascent-override: 95%;
  descent-override: 25%;
  line-gap-override: 0%;
}

/*
 * Fix for white box rendering bug
 * Issue: Semi-transparent white text (text-white/XX) sometimes renders as white boxes
 * Root cause: Unknown - possibly GPU compositing or caching issue
 * Solution: Explicit background reset + isolation to prevent stacking context issues
 */
@layer utilities {
  .text-white-safe {
    color: rgba(255, 255, 255, 0.8) !important;
    background-color: transparent !important;
    background: none !important;
  }
  .text-white-60-safe {
    color: rgba(255, 255, 255, 0.6) !important;
    background-color: transparent !important;
    background: none !important;
  }
  .text-white-70-safe {
    color: rgba(255, 255, 255, 0.7) !important;
    background-color: transparent !important;
    background: none !important;
  }
  .text-white-50-safe {
    color: rgba(255, 255, 255, 0.5) !important;
    background-color: transparent !important;
    background: none !important;
  }
}

/* Aggressive reset for elements that show white boxes */
.hero-text-fix {
  color: inherit;
  background: none !important;
  background-color: transparent !important;
  -webkit-background-clip: unset !important;
  background-clip: unset !important;
  -webkit-text-fill-color: unset !important;
}

/*
 * Hero image viewport-based zoom effect
 * Narrow viewport = zoomed in on cabin (tight crop)
 * Wide viewport = zoomed out to reveal full forest clearing
 * Uses CSS clamp() for smooth scaling between breakpoints
 */
.hero-zoom-image {
  /*
   * background-size scales from 180% (narrow/zoomed in) to 100% (wide/zoomed out)
   * 180% at 768px viewport, smoothly scales to 100% at 1920px viewport
   */
  background-size: clamp(100%, 250% - 8vw, 180%);
  transition: background-size 0.1s ease-out;
}

/* Marquee scroll animation for header banner */
@keyframes marquee-scroll {
  0% { transform: translateX(0); }
  100% { transform: translateX(-50%); }
}

.marquee-scroll {
  display: inline-flex;
  animation: marquee-scroll 120s linear infinite;
}

.marquee-scroll:hover {
  animation-play-state: paused;
}

@media (prefers-reduced-motion: reduce) {
  .marquee-scroll {
    animation: none;
    overflow: hidden;
    max-width: 100vw;
  }
}

/* Ensure prose text is readable */
.prose {
  --tw-prose-body: #374151 !important; /* gray-700 */
  --tw-prose-headings: #042e0d !important;
  --tw-prose-links: #5974c3 !important;
  --tw-prose-bold: #1f2937 !important; /* gray-800 */
  --tw-prose-quotes: #374151 !important;
  color: #374151 !important;
}

.prose p,
.prose li,
.prose td,
.prose th {
  color: #374151 !important; /* gray-700 */
}

.prose h1,
.prose h2,
.prose h3,
.prose h4,
.prose h5,
.prose h6 {
  color: #042e0d !important;
}

/* Override DaisyUI form input styles */
input,
select,
textarea {
  outline: none !important;
  box-shadow: none !important;
  --tw-ring-shadow: none !important;
  --tw-ring-color: transparent !important;
}

input:focus,
select:focus,
textarea:focus {
  outline: none !important;
  box-shadow: none !important;
  --tw-ring-shadow: none !important;
  --tw-ring-color: transparent !important;
}

/* Remove DaisyUI's default input border colors */
input:not([type="checkbox"]):not([type="radio"]),
select,
textarea {
  border-color: rgb(209 213 219) !important; /* gray-300 */
}

input:not([type="checkbox"]):not([type="radio"]):focus,
select:focus,
textarea:focus {
  border-color: #042e0d !important;
}
